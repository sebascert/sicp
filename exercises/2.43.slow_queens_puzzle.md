# Exercise 2.43

Louis Reasoner swapped the nested maps from the procedure.

```scm
(flatmap (lambda (rest-of-queens)
          (map (lambda (new-row)
                (adjoin-position new-row k rest-of-queens))
               (enumerate-interval 1 board-size)))
         (queen-cols (- k 1)))
```

The original procedure complexity can be analyzed with this recursion.

$$
\begin{aligned}
T(0) = \theta(1)\\
T(k) = \text{Filter possibilities} + \text{Compute the k-1 possibilities}\\
T(k) = board\_size \cdot queens\_cols(k-1) + T(k-1)
\end{aligned}
$$

| k | queen-cols(k) |
| - | ------------- |
| 1 | 1             |
| 2 | 0             |
| 3 | 0             |
| 4 | 2             |
| 5 | 10            |
| 6 | 4             |
| 7 | 40            |
| 8 | 92            |

As $queens\_cols$ remains small for $k \le 8$, the first term can be taken to be
about constant for this range of $k$, which gives us.

$$
T(k) \approx C + T(k-1) \approx C k \approx \theta(k)
$$

```scm
(flatmap (lambda (new-row)
          (map (lambda (rest-of-queens)
                (adjoin-position new-row k rest-of-queens))
               (queen-cols (- k 1))))
         (enumerate-interval 1 board-size))
```

Say that $T^{'}(k)$ is the modified process's complexity,After the modification
the process evaluates $T^{'}(k-1)$ eight times instead of one, this causes the
slow down as shown next.

$$
T^{'}(k) \approx C + 8T^{'}(k-1) \approx C + 8(C + 8(\dots)) \quad \text{($k$ times)}\\
$$

This is a polynomial with coefficients $C$ on $board\_size$ with degree $k$.

$$
T^{'}(k) \approx \dots + board\_size^k \approx \theta(8^k)
$$

Which means that if $T(8)$ is the original time, the complexity of the new
solutions is exponential with respect to the original,
$T^{'}(8) \approx T(8)^8$.
